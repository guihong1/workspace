# 浏览器底层原理

- 云操作系统
  - web 程序
    chrome 足够强的话，可以根据云服务
  - 阿里云 IP 服务
    一台服务器，虚拟化、容器化(docker)
  - LLM时代，云 算力资源 共享

- 为什么是Chrome？
  - 主流
    - chrome 超越 IE 浏览器(Edge) 成为 NO.1
    - 国内浏览器 其实就是chrome 套了一层壳子
  - 内核
    - IE 和 非IE  代码兼容性问题
    - 移动时代，没IE 什么事情
      苹果 webkit 内核
      google 基于webkit ， 开源了chromium 的浏览器项目 (360 等浏览器基于它)
      chrome是chromium的商业版
      - v8 引擎 + 渲染引擎
      - webkit 分了叉 升级为 blink 内核

  - 架构

标准盒模型 W3C  box-sizing: content-box  宽高是单纯的内容大小  怪异盒模型 border-box  设置宽高包括内边距 边框 内容 

- 要那么多的进程干什么
  - 进程 是操作系统资源分配的最小单位
  - 线程 是CPU调度的最小单位
    线程属于进程

  - JS 是 单线程的 简单 可靠
  - 多线程 更快

- 并行和并发 并行 多个任务同时执行 并发 多个任务看上去同时执行
 - 进程可以启动多个线程
 - 线程可以共享进程中的数据
 - 进程关闭，回收内存
 - 进程之间相互隔离
 - 进程间可以通信
  - 多项 相对比较独立的任务
 下载任务
 - 进程间的通信 IPC

 浏览器 
  - 浏览器主进程 
  - 插件进程
  - 渲染进程

浏览器架构
 多进程架构

单进程浏览器
  - 1个进程 浏览器主进程
  - 1个线程 渲染主线程
  - 1个线程 事件触发线程
  - 1个线程 http请求线程
  - 1个线程 定时器线程
  - 1个线程 异步线程
  - 1个线程 垃圾回收线程

- chrome 多进程有哪些？
 - 浏览器主进程
   负责界面显示、用户交互(事件冒泡、捕获机制)、子进程管理 (IPC)、存储功能(cookie、localStorage、indexDB) 安全
 - 渲染进程
   排版Webkit/Blink + v8 引擎(JS 单线程, 异步) 在这个进程
   A 页面打开的情况下  B页面也可以打开  (A/B 崩溃可能)
   每个tab 都是一个渲染进程。运行在沙箱中，操作系统等
   比如 GPS 功能、摄像头 等 提醒授权

- 插件进程
  插件运行在沙箱中，不能访问浏览器的资源，只能通过 IPC 来通信
  比如 flash 插件

- GPU 进程
  3D 绘制 加速 （ANGLE 项目）
  显卡 显存 都习惯使用 GPU 来加速

- 从输入URL 到页面显示
  - 浏览器要打开 启动了4个进程 (多进程架构)
    分别介绍各个进程的作用
    
  




